<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¬è©¦çµ„ä»¶ç®¡ç†ç³»çµ± - AICore0620</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
        }

        .workflow-section {
            margin-bottom: 40px;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .workflow-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            border-bottom: 3px solid #4facfe;
            padding-bottom: 10px;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .component-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .component-card:hover {
            border-color: #4facfe;
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(79, 172, 254, 0.2);
        }

        .component-card.selected {
            border-color: #00f2fe;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }

        .component-name {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .component-type {
            display: inline-block;
            background: #4facfe;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            margin-bottom: 10px;
        }

        .component-description {
            color: #666;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .action-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: #4facfe;
            color: white;
        }

        .btn-primary:hover {
            background: #2196f3;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-active {
            background: #4caf50;
        }

        .status-inactive {
            background: #f44336;
        }

        .status-unknown {
            background: #ff9800;
        }

        .results-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }

        .loading {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4facfe;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .architecture-info {
            background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%);
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .architecture-info h3 {
            color: #155724;
            margin-bottom: 10px;
        }

        .architecture-info p {
            color: #155724;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—ï¸ æ¸¬è©¦çµ„ä»¶ç®¡ç†ç³»çµ±</h1>
            <p>AICore0620 - ç´”AIé©…å‹•æ¸¬è©¦çµ„ä»¶æ­¸å±¬ç®¡ç†èˆ‡é‡æ§‹é©—è­‰</p>
        </div>

        <div class="main-content">
            <!-- æ¶æ§‹é‡æ§‹ä¿¡æ¯ -->
            <div class="architecture-info">
                <h3>ğŸ¯ æ¶æ§‹é‡æ§‹å®Œæˆ</h3>
                <p><strong>performance_analysis_mcp</strong> ä¿ç•™åœ¨ Coding Workflow (ç·¨ç¢¼éšæ®µæ€§èƒ½åé¥‹)</p>
                <p><strong>testing_strategy_mcp</strong> ç§»å‹•åˆ° Test Management Workflow (æ¸¬è©¦ç­–ç•¥æ ¸å¿ƒçµ„ä»¶)</p>
                <p>è·è²¬é‚Šç•Œæ›´æ¸…æ™°ï¼Œå”åŒæ•ˆç‡æ›´é«˜ï¼Œç¬¦åˆAICore0620ç›®éŒ„è¦ç¯„3.0</p>
            </div>

            <!-- Coding Workflow Section -->
            <div class="workflow-section">
                <h2 class="workflow-title">ğŸ“ Coding Workflow MCP (6å€‹çµ„ä»¶)</h2>
                <div class="component-grid" id="codingComponents">
                    <!-- çµ„ä»¶å°‡é€šéJavaScriptå‹•æ…‹åŠ è¼‰ -->
                </div>
            </div>

            <!-- Test Management Workflow Section -->
            <div class="workflow-section">
                <h2 class="workflow-title">ğŸ§ª Test Management Workflow MCP (4å€‹çµ„ä»¶)</h2>
                <div class="component-grid" id="testComponents">
                    <!-- çµ„ä»¶å°‡é€šéJavaScriptå‹•æ…‹åŠ è¼‰ -->
                </div>
            </div>

            <!-- æ“ä½œé¢æ¿ -->
            <div class="action-panel">
                <h3>ğŸš€ ç³»çµ±æ“ä½œ</h3>
                <p>é¸æ“‡çµ„ä»¶ä¸¦åŸ·è¡Œç›¸æ‡‰çš„å·¥ä½œæµæ“ä½œ</p>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="testCodingWorkflow()">æ¸¬è©¦ Coding Workflow</button>
                    <button class="btn btn-primary" onclick="testTestManagementWorkflow()">æ¸¬è©¦ Test Management Workflow</button>
                    <button class="btn btn-secondary" onclick="checkSystemHealth()">ç³»çµ±å¥åº·æª¢æŸ¥</button>
                    <button class="btn btn-secondary" onclick="viewArchitectureReport()">æŸ¥çœ‹æ¶æ§‹å ±å‘Š</button>
                </div>
            </div>

            <!-- çµæœé¡¯ç¤ºå€åŸŸ -->
            <div class="results-section" id="resultsSection">
                <h3>ğŸ“Š åŸ·è¡Œçµæœ</h3>
                <div id="resultsContent"></div>
            </div>
        </div>
    </div>

    <script>
        // çµ„ä»¶æ•¸æ“š
        const codingComponents = [
            {
                id: 'kilocode_mcp',
                name: 'KiloCodeä»£ç¢¼ç”ŸæˆMCP',
                type: 'generator',
                port: 8317,
                description: 'å°ˆæ¥­çš„ä»£ç¢¼ç”Ÿæˆå¼•æ“ï¼Œç•¶éœ€è¦å‰µå»ºæ–°ä»£ç¢¼ã€è§£æ±ºæ–¹æ¡ˆæˆ–åŸå‹æ™‚çš„é¦–é¸çµ„ä»¶',
                status: 'unknown'
            },
            {
                id: 'code_quality_mcp',
                name: 'ä»£ç¢¼è³ªé‡åˆ†æMCP',
                type: 'analyzer',
                port: 8310,
                description: 'å°ˆæ¥­çš„ä»£ç¢¼è³ªé‡è©•ä¼°èƒ½åŠ›ï¼Œé©åˆä»£ç¢¼å¯©æŸ¥ã€è³ªé‡æ§åˆ¶å’Œè¦ç¯„æª¢æŸ¥',
                status: 'unknown'
            },
            {
                id: 'architecture_design_mcp',
                name: 'æ¶æ§‹è¨­è¨ˆåˆ†æMCP',
                type: 'analyzer',
                port: 8311,
                description: 'å°ˆæ¥­çš„ç³»çµ±æ¶æ§‹åˆ†æèƒ½åŠ›ï¼Œé©åˆæ¶æ§‹è¨­è¨ˆè©•ä¼°å’ŒæŠ€è¡“æ±ºç­–',
                status: 'unknown'
            },
            {
                id: 'performance_analysis_mcp',
                name: 'æ€§èƒ½åˆ†æMCP',
                type: 'analyzer',
                port: 8312,
                description: 'æ€§èƒ½åˆ†æåœ¨ç·¨ç¢¼éšæ®µæä¾›å³æ™‚åé¥‹ï¼Œèˆ‡æ¶æ§‹è¨­è¨ˆç·Šå¯†é…åˆ',
                status: 'unknown'
            },
            {
                id: 'security_audit_mcp',
                name: 'å®‰å…¨å¯©è¨ˆMCP',
                type: 'analyzer',
                port: 8313,
                description: 'å°ˆæ¥­çš„å®‰å…¨å¯©è¨ˆèƒ½åŠ›ï¼Œé©åˆå®‰å…¨æª¢æŸ¥å’Œé¢¨éšªè©•ä¼°éœ€æ±‚',
                status: 'unknown'
            },
            {
                id: 'code_documentation_mcp',
                name: 'ä»£ç¢¼æ–‡æª”åˆ†æMCP',
                type: 'analyzer',
                port: 8315,
                description: 'å°ˆæ¥­çš„ä»£ç¢¼æ–‡æª”åˆ†æèƒ½åŠ›ï¼Œé©åˆæ–‡æª”è³ªé‡è©•ä¼°å’ŒçŸ¥è­˜ç®¡ç†',
                status: 'unknown'
            },
            {
                id: 'dependency_analysis_mcp',
                name: 'ä¾è³´é—œä¿‚åˆ†æMCP',
                type: 'analyzer',
                port: 8316,
                description: 'å°ˆæ¥­çš„ä¾è³´é—œä¿‚åˆ†æèƒ½åŠ›ï¼Œé©åˆä¾è³´ç®¡ç†å’Œå®‰å…¨æƒæéœ€æ±‚',
                status: 'unknown'
            }
        ];

        const testComponents = [
            {
                id: 'testing_strategy_mcp',
                name: 'æ¸¬è©¦ç­–ç•¥åˆ†æMCP',
                type: 'strategy_analyzer',
                port: 8314,
                description: 'æ¸¬è©¦ç­–ç•¥åˆ¶å®šæ˜¯æ¸¬è©¦ç®¡ç†çš„æ ¸å¿ƒï¼Œå¾Coding Workflowé·ç§»è€Œä¾†ï¼Œèˆ‡æ¸¬è©¦åŸ·è¡Œå”åŒ',
                status: 'unknown'
            },
            {
                id: 'test_execution_mcp',
                name: 'æ¸¬è©¦åŸ·è¡Œç®¡ç†MCP',
                type: 'execution_manager',
                port: 8318,
                description: 'å°ˆæ¥­çš„æ¸¬è©¦åŸ·è¡Œç®¡ç†èƒ½åŠ›ï¼Œé©åˆæ¸¬è©¦åŸ·è¡Œå’Œç’°å¢ƒç®¡ç†éœ€æ±‚',
                status: 'unknown'
            },
            {
                id: 'test_automation_mcp',
                name: 'æ¸¬è©¦è‡ªå‹•åŒ–MCP',
                type: 'automation_engine',
                port: 8319,
                description: 'å°ˆæ¥­çš„æ¸¬è©¦è‡ªå‹•åŒ–èƒ½åŠ›ï¼Œé©åˆè‡ªå‹•åŒ–æ¸¬è©¦å’ŒæŒçºŒé›†æˆéœ€æ±‚',
                status: 'unknown'
            },
            {
                id: 'quality_assurance_mcp',
                name: 'è³ªé‡ä¿è­‰åˆ†æMCP',
                type: 'quality_analyzer',
                port: 8320,
                description: 'å°ˆæ¥­çš„è³ªé‡ä¿è­‰åˆ†æèƒ½åŠ›ï¼Œé©åˆè³ªé‡æ§åˆ¶å’Œé¢¨éšªç®¡ç†éœ€æ±‚',
                status: 'unknown'
            }
        ];

        // æ¸²æŸ“çµ„ä»¶
        function renderComponents() {
            renderComponentGrid('codingComponents', codingComponents);
            renderComponentGrid('testComponents', testComponents);
        }

        function renderComponentGrid(containerId, components) {
            const container = document.getElementById(containerId);
            container.innerHTML = components.map(component => `
                <div class="component-card" data-component-id="${component.id}" onclick="selectComponent('${component.id}')">
                    <div class="component-name">
                        <span class="status-indicator status-${component.status}"></span>
                        ${component.name}
                    </div>
                    <div class="component-type">${component.type}</div>
                    <div class="component-description">${component.description}</div>
                    <div style="margin-top: 10px; font-size: 0.8em; color: #888;">
                        Port: ${component.port}
                    </div>
                </div>
            `).join('');
        }

        // é¸æ“‡çµ„ä»¶
        function selectComponent(componentId) {
            // ç§»é™¤æ‰€æœ‰é¸ä¸­ç‹€æ…‹
            document.querySelectorAll('.component-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // æ·»åŠ é¸ä¸­ç‹€æ…‹
            document.querySelector(`[data-component-id="${componentId}"]`).classList.add('selected');
        }

        // æ¸¬è©¦Coding Workflow
        async function testCodingWorkflow() {
            showResults('æ­£åœ¨æ¸¬è©¦Coding Workflow MCP...', true);
            
            try {
                const response = await fetch('/api/test-coding-workflow', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        requirement: 'å‰µå»ºä¸€å€‹é«˜æ€§èƒ½çš„æ•¸æ“šè™•ç†API',
                        context: { complexity: 'high', priority: 'performance' }
                    })
                });
                
                const result = await response.json();
                showResults(`
                    <h4>âœ… Coding Workflow æ¸¬è©¦çµæœ</h4>
                    <p><strong>é¸ä¸­çµ„ä»¶æ•¸é‡:</strong> ${result.selected_components?.length || 0}</p>
                    <p><strong>AIä¿¡å¿ƒåº¦:</strong> ${result.confidence || 'N/A'}</p>
                    <p><strong>åŸ·è¡Œç‹€æ…‹:</strong> ${result.success ? 'æˆåŠŸ' : 'å¤±æ•—'}</p>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `);
            } catch (error) {
                showResults(`âŒ æ¸¬è©¦å¤±æ•—: ${error.message}`);
            }
        }

        // æ¸¬è©¦Test Management Workflow
        async function testTestManagementWorkflow() {
            showResults('æ­£åœ¨æ¸¬è©¦Test Management Workflow MCP...', true);
            
            try {
                const response = await fetch('/api/test-test-workflow', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        requirement: 'ç‚ºæ–°APIåˆ¶å®šå…¨é¢æ¸¬è©¦ç­–ç•¥',
                        context: { scope: 'comprehensive', phase: 'planning' }
                    })
                });
                
                const result = await response.json();
                showResults(`
                    <h4>âœ… Test Management Workflow æ¸¬è©¦çµæœ</h4>
                    <p><strong>é¸ä¸­çµ„ä»¶æ•¸é‡:</strong> ${result.selected_components?.length || 0}</p>
                    <p><strong>AIä¿¡å¿ƒåº¦:</strong> ${result.confidence || 'N/A'}</p>
                    <p><strong>åŸ·è¡Œç‹€æ…‹:</strong> ${result.success ? 'æˆåŠŸ' : 'å¤±æ•—'}</p>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `);
            } catch (error) {
                showResults(`âŒ æ¸¬è©¦å¤±æ•—: ${error.message}`);
            }
        }

        // ç³»çµ±å¥åº·æª¢æŸ¥
        async function checkSystemHealth() {
            showResults('æ­£åœ¨æª¢æŸ¥ç³»çµ±å¥åº·ç‹€æ…‹...', true);
            
            try {
                const response = await fetch('/api/health-check');
                const result = await response.json();
                
                showResults(`
                    <h4>ğŸ¥ ç³»çµ±å¥åº·æª¢æŸ¥çµæœ</h4>
                    <p><strong>ç³»çµ±ç‹€æ…‹:</strong> ${result.status}</p>
                    <p><strong>Coding Workflow:</strong> ${result.coding_workflow_status || 'æœªçŸ¥'}</p>
                    <p><strong>Test Management Workflow:</strong> ${result.test_workflow_status || 'æœªçŸ¥'}</p>
                    <p><strong>æª¢æŸ¥æ™‚é–“:</strong> ${new Date().toLocaleString()}</p>
                `);
            } catch (error) {
                showResults(`âŒ å¥åº·æª¢æŸ¥å¤±æ•—: ${error.message}`);
            }
        }

        // æŸ¥çœ‹æ¶æ§‹å ±å‘Š
        function viewArchitectureReport() {
            showResults(`
                <h4>ğŸ“‹ æ¶æ§‹é‡æ§‹å ±å‘Š</h4>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 10px 0;">
                    <h5>ğŸ”’ performance_analysis_mcp ä¿ç•™æ±ºç­–</h5>
                    <p><strong>ä½ç½®:</strong> Coding Workflow MCP</p>
                    <p><strong>ç†ç”±:</strong> æ€§èƒ½åˆ†æåœ¨ç·¨ç¢¼éšæ®µå°±éœ€è¦è€ƒæ…®ï¼Œèˆ‡ä»£ç¢¼ç”Ÿæˆã€æ¶æ§‹è¨­è¨ˆç·Šå¯†é…åˆ</p>
                    <p><strong>å„ªå‹¢:</strong> æä¾›å³æ™‚æ€§èƒ½åé¥‹ï¼Œé¿å…å¾ŒæœŸé‡æ§‹æˆæœ¬</p>
                </div>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 10px 0;">
                    <h5>ğŸ”„ testing_strategy_mcp ç§»å‹•æ±ºç­–</h5>
                    <p><strong>ä½ç½®:</strong> Test Management Workflow MCP</p>
                    <p><strong>ç†ç”±:</strong> æ¸¬è©¦ç­–ç•¥åˆ¶å®šæ˜¯æ¸¬è©¦ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½</p>
                    <p><strong>å„ªå‹¢:</strong> èˆ‡æ¸¬è©¦åŸ·è¡Œã€æ¸¬è©¦ç·¨æ’åœ¨åŒä¸€workflowå”åŒæ›´é«˜æ•ˆ</p>
                </div>
                <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 10px 0;">
                    <h5>ğŸ“Š é‡æ§‹æ•ˆæœ</h5>
                    <p>âœ… æ›´æ¸…æ™°çš„è·è²¬é‚Šç•Œ</p>
                    <p>âœ… æ›´é«˜æ•ˆçš„çµ„ä»¶å”åŒ</p>
                    <p>âœ… æ›´å°ˆæ¥­çš„é ˜åŸŸæ·±åº¦</p>
                    <p>âœ… æ›´éˆæ´»çš„ç¨ç«‹æ“´å±•</p>
                </div>
            `);
        }

        // é¡¯ç¤ºçµæœ
        function showResults(content, isLoading = false) {
            const resultsSection = document.getElementById('resultsSection');
            const resultsContent = document.getElementById('resultsContent');
            
            if (isLoading) {
                resultsContent.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>${content}</p>
                    </div>
                `;
            } else {
                resultsContent.innerHTML = content;
            }
            
            resultsSection.style.display = 'block';
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        // é é¢åŠ è¼‰å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            renderComponents();
        });
    </script>
</body>
</html>

